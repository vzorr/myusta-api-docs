<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Complete Endpoints</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üöÄ API Documentation</h1>
            <p>Complete endpoints with request/response formats</p>
        </header>

        <!-- Search and Filter Controls -->
        <div class="controls">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search endpoints..." class="search-input">
                <button id="clearSearch" class="clear-btn">√ó</button>
            </div>
            
            <div class="filter-container">
                <select id="categoryFilter" class="filter-select">
                    <option value="">All Categories</option>
                    <option value="user">üë§ User Profile</option>
                    <option value="preferences">üéØ Preferences</option>
                    <option value="security">üîê Security</option>
                    <option value="jobs">üìã Job Management</option>
                    <option value="customer">üìä Customer Profile</option>
                    <option value="usta">üîß Usta Profile</option>
                </select>
                
                <select id="methodFilter" class="filter-select">
                    <option value="">All Methods</option>
                    <option value="GET">GET</option>
                    <option value="POST">POST</option>
                    <option value="PATCH">PATCH</option>
                    <option value="PUT">PUT</option>
                </select>
            </div>
        </div>

        <!-- Table of Contents -->
        <div class="toc-container">
            <h3>üìñ Table of Contents</h3>
            <div class="toc" id="tableOfContents"></div>
        </div>

        <!-- API Endpoints -->
        <div class="endpoints-container" id="endpointsContainer">
            
            <!-- User Profile Management -->
            <section class="category-section" data-category="user">
                <h2 class="category-title">üîê User Profile Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get usta profile user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/users/ustaProfile</span>
                            <span class="title">Get Usta Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /users/ustaProfile
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Usta profile fetched successfully",
  "data": {
    "id": "uuid",
    "firstName": "John",
    "lastName": "Doe",
    "profilePicture": "https://...",
    "bio": "Professional description",
    "aboutMe": "Professional plumbing specialist with 5 years of experience",
    "experience": 5,
    "hourlyRate": 50,
    "rating": 4.5,
    "totalJobs": 25,
    "skills": ["Plumbing", "Electrical"],
    "locations": [{
      "address": "Tirana, Albania",
      "latitude": 41.3275,
      "longitude": 19.8187,
      "maxDistance": 50
    }],
    "notifications": {
      "unread": 3
    },
    "phone": "+355691234567",
    "professionalDetail": {
      "nipt": "K12345678A",
      "experiences": [...]
    },
    "portfolios": [...],
    "availability": {...},
    "termsAndConditions": true,
    "notificationViaEmail": true,
    "notificationViaSms": false,
    "notificationViaApp": true
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="GET" data-search="get customer profile user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/users/customerProfile</span>
                            <span class="title">Get Customer Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /users/customerProfile
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Customer profile fetched successfully",
  "data": {
    "id": "uuid",
    "firstName": "Jane",
    "lastName": "Smith",
    "profilePicture": "https://...",
    "aboutMe": "Looking for professional services in plumbing, electrical",
    "locations": [{
      "address": "Tirana, Albania",
      "latitude": 41.3275,
      "longitude": 19.8187,
      "maxDistance": 25
    }],
    "notifications": {
      "unread": 2
    },
    "phone": "+355691234567",
    "customerPreferences": ["plumbing", "electrical"],
    "notificationViaEmail": true,
    "notificationViaSms": true,
    "notificationViaApp": true,
    "termsAndConditions": true
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update basic profile user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/profile</span>
                            <span class="title">Update Basic Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/profile
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "bio": "Updated bio",
  "profilePicture": "https://..."
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Profile updated successfully",
  "data": {
    "id": "uuid",
    "firstName": "John",
    "lastName": "Doe",
    "bio": "Updated bio",
    "profilePicture": "https://...",
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update email user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/email</span>
                            <span class="title">Update Email</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/email
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "newEmail": "newemail@example.com",
  "password": "currentPassword"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Email updated successfully",
  "data": {
    "email": "newemail@example.com",
    "emailVerified": false,
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update phone user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/phone</span>
                            <span class="title">Update Phone</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/phone
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "newPhone": "+355691234567",
  "password": "currentPassword"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Phone number updated successfully",
  "data": {
    "phone": "+355691234567",
    "phoneVerified": false,
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="change password user">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/change-password</span>
                            <span class="title">Change Password</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/change-password
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "oldPassword": "currentPassword",
  "newPassword": "newSecurePassword"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Password changed successfully",
  "data": {
    "message": "Your password has been updated successfully",
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- User Preferences Management -->
            <section class="category-section" data-category="preferences">
                <h2 class="category-title">üéØ User Preferences Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get user preferences">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/users/preferences</span>
                            <span class="title">Get User Preferences</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /users/preferences
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "User preferences retrieved successfully",
  "data": {
    "userId": "uuid",
    "preferredJobTypes": ["short_term", "emergency"],
    "jobBudget": {
      "min": 1000,
      "max": 10000,
      "currency": "ALL"
    },
    "notificationPreference": {
      "app": true,
      "email": true,
      "sms": false
    },
    "termsAcceptance": {
      "accepted": true,
      "acceptedAt": "2024-01-15T10:30:00.000Z",
      "version": "1.0"
    },
    "accountStatus": "active"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update job work preferences">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/preferences/job-work</span>
                            <span class="title">Update Job Work Preferences</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/preferences/job-work
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "preferredJobTypes": ["short_term", "long_term"],
  "jobBudget": {
    "min": 2000,
    "max": 15000,
    "currency": "ALL"
  },
  "notificationPreference": {
    "app": true,
    "email": true,
    "sms": false
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Preferences updated successfully",
  "data": {
    "userId": "uuid",
    "preferredJobTypes": ["short_term", "long_term"],
    "jobBudget": {
      "min": 2000,
      "max": 15000,
      "currency": "ALL"
    },
    "notificationPreference": {
      "app": true,
      "email": true,
      "sms": false
    },
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="POST" data-search="accept terms conditions">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method post">POST</span>
                            <span class="path">/users/preferences/accept-terms</span>
                            <span class="title">Accept Terms and Conditions</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">POST /users/preferences/accept-terms
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "version": "1.0",
  "acceptedTerms": true
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Terms and conditions accepted successfully",
  "data": {
    "userId": "uuid",
    "termsAcceptance": {
      "accepted": true,
      "acceptedAt": "2024-01-15T10:30:00.000Z",
      "version": "1.0",
      "ipAddress": "192.168.1.1",
      "userAgent": "Mozilla/5.0..."
    },
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Security Management -->
            <section class="category-section" data-category="security">
                <h2 class="category-title">üîê Security Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get security settings">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/users/security</span>
                            <span class="title">Get Security Settings</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /users/security
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Security settings retrieved successfully",
  "data": {
    "userId": "uuid",
    "email": "user@example.com",
    "phone": "+355691234567",
    "emailVerified": true,
    "phoneVerified": true,
    "securitySettings": {
      "twoFactorEnabled": false,
      "twoFactorMethods": {
        "email": false,
        "sms": false
      }
    },
    "accountStatus": "active",
    "accountStatusDetails": {}
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update security settings">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/users/security/settings</span>
                            <span class="title">Update Security Settings</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /users/security/settings
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "twoFactorEnabled": true,
  "twoFactorMethods": {
    "email": true,
    "sms": false
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Security settings updated successfully",
  "data": {
    "userId": "uuid",
    "securitySettings": {
      "twoFactorEnabled": true,
      "twoFactorMethods": {
        "email": true,
        "sms": false
      }
    },
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="POST" data-search="deactivate account">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method post">POST</span>
                            <span class="path">/users/security/deactivate</span>
                            <span class="title">Deactivate Account</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">POST /users/security/deactivate
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "reason": "Taking a break from the platform"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Account deactivated successfully",
  "data": {
    "userId": "uuid",
    "accountStatus": "deactivated",
    "deactivatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="POST" data-search="delete account soft">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method post">POST</span>
                            <span class="path">/users/security/delete</span>
                            <span class="title">Delete Account (Soft Delete)</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">POST /users/security/delete
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "password": "currentPassword",
  "reason": "No longer need the service",
  "dataExportRequested": false
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Account deleted successfully",
  "data": {
    "userId": "uuid",
    "accountStatus": "deleted",
    "deletedAt": "2024-01-15T10:30:00.000Z",
    "dataExportRequested": false
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="POST" data-search="reactivate account">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method post">POST</span>
                            <span class="path">/users/security/reactivate</span>
                            <span class="title">Reactivate Account</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">POST /users/security/reactivate
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "reason": "Want to use the platform again"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Account reactivated successfully",
  "data": {
    "userId": "uuid",
    "accountStatus": "active",
    "reactivatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Job Management -->
            <section class="category-section" data-category="jobs">
                <h2 class="category-title">üìã Job Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get user jobs customer">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/jobs/user/jobs</span>
                            <span class="title">Get User Jobs (Customer Jobs)</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /jobs/user/jobs?page=1&limit=10
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "User jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Fix Kitchen Sink",
        "description": "Kitchen sink is leaking and needs repair",
        "budget": 5000,
        "status": "open",
        "category": ["plumber"],
        "paymentMethod": "hourly",
        "images": ["https://..."],
        "location": {
          "address": "Tirana, Albania",
          "latitude": 41.3275,
          "longitude": 19.8187
        },
        "createdAt": "2024-01-15T10:30:00.000Z",
        "updatedAt": "2024-01-15T11:00:00.000Z",
        "startDate": "2024-01-20T09:00:00.000Z",
        "endDate": "2024-01-20T17:00:00.000Z",
        "jobProposalsCount": 3
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 5,
      "totalCount": 45,
      "limit": 10,
      "hasNextPage": true,
      "hasPrevPage": false
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="GET" data-search="get user active jobs">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/jobs/user/active</span>
                            <span class="title">Get User Active Jobs</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /jobs/user/active?page=1&limit=10
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Customer Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Active jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Bathroom Renovation",
        "description": "Complete bathroom renovation needed",
        "budget": 15000,
        "currency": "ALL",
        "startDate": "2024-01-15T09:00:00.000Z",
        "endDate": "2024-01-25T17:00:00.000Z",
        "category": ["renovation", "plumber"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania",
          "latitude": 41.3275,
          "longitude": 19.8187
        },
        "images": ["https://..."],
        "usta": {
          "id": "uuid",
          "firstName": "John",
          "lastName": "Builder",
          "profilePicture": "https://...",
          "phone": "+355691234567"
        },
        "contractId": "uuid",
        "progress": 45,
        "daysRemaining": 8,
        "status": "active",
        "contractStatus": "active"
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 2,
      "totalCount": 12,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Usta Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Active jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Bathroom Renovation",
        "description": "Complete bathroom renovation needed",
        "budget": 15000,
        "currency": "ALL",
        "startDate": "2024-01-15T09:00:00.000Z",
        "endDate": "2024-01-25T17:00:00.000Z",
        "category": ["renovation", "plumber"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania"
        },
        "images": ["https://..."],
        "customer": {
          "id": "uuid",
          "firstName": "Jane",
          "lastName": "Customer",
          "profilePicture": "https://...",
          "phone": "+355691234567"
        },
        "status": "active",
        "contract": {
          "id": "uuid",
          "status": "active",
          "totalCost": 15000,
          "startDate": "2024-01-15T09:00:00.000Z",
          "endDate": "2024-01-25T17:00:00.000Z",
          "createdAt": "2024-01-14T10:00:00.000Z",
          "updatedAt": "2024-01-15T09:00:00.000Z"
        },
        "progress": 45,
        "daysRemaining": 8,
        "estimatedEarnings": 13500
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 3,
      "totalCount": 25,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="GET" data-search="get user completed jobs">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/jobs/user/completed</span>
                            <span class="title">Get User Completed Jobs</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /jobs/user/completed?page=1&limit=10
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Customer Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Completed jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Kitchen Plumbing Fix",
        "description": "Fixed leaking kitchen sink",
        "budget": 5000,
        "currency": "ALL",
        "rating": 5,
        "startDate": "2024-01-01T09:00:00.000Z",
        "endDate": "2024-01-01T17:00:00.000Z",
        "category": ["plumber"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania"
        },
        "images": ["https://..."],
        "usta": {
          "id": "uuid",
          "firstName": "John",
          "lastName": "Plumber",
          "profilePicture": "https://..."
        },
        "hasRating": true,
        "ratingId": "uuid",
        "status": "completed",
        "contractStatus": "fulfilled"
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 5,
      "totalCount": 48,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Usta Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Completed jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Kitchen Plumbing Fix",
        "description": "Fixed leaking kitchen sink",
        "budget": 5000,
        "currency": "ALL",
        "rating": 5,
        "startDate": "2024-01-01T09:00:00.000Z",
        "endDate": "2024-01-01T17:00:00.000Z",
        "category": ["plumber"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania"
        },
        "images": ["https://..."],
        "customer": {
          "id": "uuid",
          "firstName": "Jane",
          "lastName": "Customer",
          "profilePicture": "https://..."
        },
        "hasRating": true,
        "status": "completed",
        "contract": {
          "id": "uuid",
          "status": "fulfilled",
          "totalCost": 5000,
          "startDate": "2024-01-01T09:00:00.000Z",
          "endDate": "2024-01-01T17:00:00.000Z",
          "earnings": 4500
        }
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 8,
      "totalCount": 75,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="GET" data-search="get user pending jobs">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/jobs/user/pending</span>
                            <span class="title">Get User Pending Jobs</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /jobs/user/pending?page=1&limit=10
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Customer Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Pending jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Electrical Work in Living Room",
        "description": "Need to install new electrical outlets",
        "budget": 3000,
        "currency": "ALL",
        "startDate": "2024-01-20T09:00:00.000Z",
        "endDate": "2024-01-21T17:00:00.000Z",
        "category": ["electrician"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania"
        },
        "images": ["https://..."],
        "usta": {
          "id": "uuid",
          "firstName": "Mike",
          "lastName": "Electrician",
          "profilePicture": "https://...",
          "phone": "+355691234567"
        },
        "contractId": "uuid",
        "progress": 0,
        "daysRemaining": 5,
        "status": "contractor_selected",
        "contractStatus": "pending",
        "proposals": [
          {
            "id": "uuid",
            "status": "accepted",
            "proposalType": "fixed",
            "description": "I can complete this electrical work professionally",
            "startDate": "2024-01-20T09:00:00.000Z",
            "endDate": "2024-01-21T17:00:00.000Z",
            "totalCost": 3000,
            "serviceFee": 300,
            "finalPayment": 2700,
            "materialItems": [
              {
                "item": "Electrical outlets",
                "quantity": 4,
                "unitPrice": 50,
                "totalPrice": 200
              }
            ],
            "createdAt": "2024-01-15T10:30:00.000Z",
            "updatedAt": "2024-01-16T14:20:00.000Z",
            "usta": {
              "id": "uuid",
              "firstName": "Mike",
              "lastName": "Electrician",
              "fullName": "Mike Electrician",
              "averageRating": 4.8,
              "totalRatings": 45,
              "profilePicture": "https://...",
              "phone": "+355691234567",
              "isVerified": true
            }
          }
        ]
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 2,
      "totalCount": 15,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Usta Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Pending jobs fetched successfully",
  "data": {
    "jobs": [
      {
        "id": "uuid",
        "title": "Electrical Work in Living Room",
        "description": "Need to install new electrical outlets",
        "budget": 3000,
        "currency": "ALL",
        "startDate": "2024-01-20T09:00:00.000Z",
        "endDate": "2024-01-21T17:00:00.000Z",
        "category": ["electrician"],
        "paymentMethod": "fixed",
        "location": {
          "address": "Tirana, Albania"
        },
        "images": ["https://..."],
        "customer": {
          "id": "uuid",
          "firstName": "Jane",
          "lastName": "Customer",
          "profilePicture": "https://...",
          "phone": "+355691234567"
        },
        "status": "contractor_selected",
        "contract": {
          "id": "uuid",
          "status": "pending",
          "totalCost": 3000,
          "startDate": "2024-01-20T09:00:00.000Z",
          "endDate": "2024-01-21T17:00:00.000Z",
          "createdAt": "2024-01-16T15:00:00.000Z"
        }
      }
    ],
    "pagination": {
      "currentPage": 1,
      "totalPages": 1,
      "totalCount": 8,
      "limit": 10
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customer Profile Management -->
            <section class="category-section" data-category="customer">
                <h2 class="category-title">üìä Customer Profile Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get customer profile">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/customer/profile</span>
                            <span class="title">Get Customer Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /customer/profile
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Customer profile retrieved successfully",
  "data": {
    "id": "uuid",
    "firstName": "Jane",
    "lastName": "Smith",
    "profilePicture": "https://...",
    "aboutMe": "Looking for professional services in plumbing, electrical",
    "locations": [
      {
        "address": "Tirana, Albania",
        "latitude": 41.3275,
        "longitude": 19.8187,
        "maxDistance": 25
      }
    ],
    "notifications": {
      "unread": 2
    },
    "phone": "+355691234567",
    "customerPreferences": ["plumbing", "electrical"],
    "notificationViaEmail": true,
    "notificationViaSms": true,
    "notificationViaApp": true,
    "termsAndConditions": true
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PUT" data-search="update customer profile">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method put">PUT</span>
                            <span class="path">/customer/profile</span>
                            <span class="title">Update Customer Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PUT /customer/profile
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "firstName": "Jane",
  "lastName": "Smith",
  "profilePicture": "https://...",
  "customerPreferences": ["plumbing", "electrical", "cleaning"]
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Profile updated successfully",
  "data": {
    "id": "uuid",
    "firstName": "Jane",
    "lastName": "Smith",
    "profilePicture": "https://...",
    "customerPreferences": ["plumbing", "electrical", "cleaning"],
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PATCH" data-search="update customer preferences">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method patch">PATCH</span>
                            <span class="path">/customer/preferences</span>
                            <span class="title">Update Customer Preferences</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PATCH /customer/preferences
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "customerPreferences": ["plumbing", "electrical"],
  "notificationPreference": {
    "app": true,
    "email": true,
    "sms": false
  }
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Preferences updated successfully",
  "data": {
    "customerPreferences": ["plumbing", "electrical"],
    "notificationPreference": {
      "app": true,
      "email": true,
      "sms": false
    },
    "updatedAt": "2024-01-15T10:30:00.000Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Usta Profile Management -->
            <section class="category-section" data-category="usta">
                <h2 class="category-title">üîß Usta Profile Management</h2>
                
                <div class="endpoint" data-method="GET" data-search="get usta profile">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method get">GET</span>
                            <span class="path">/usta/profile</span>
                            <span class="title">Get Usta Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">GET /usta/profile
Authorization: Bearer &lt;token&gt;</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Usta profile fetched successfully",
  "data": {
    "id": "uuid",
    "firstName": "John",
    "lastName": "Builder",
    "email": "john@example.com",
    "phone": "+355691234567",
    "profilePicture": "https://...",
    "bio": "Professional builder with 10 years experience",
    "averageRating": 4.8,
    "totalRatings": 125,
    "totalHires": 98,
    "totalViews": 1250,
    "isVerified": true,
    "isFeatured": false,
    "professionalDetail": {
      "nipt": "K12345678A",
      "experiences": [...]
    },
    "portfolios": [...],
    "locations": [...],
    "availability": {...},
    "skills": [...],
    "workHistory": [...],
    "statistics": {
      "profileViews": 1250,
      "skillCount": 5,
      "portfolioCount": 8,
      "workHistoryCount": 15
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint" data-method="PUT" data-search="update usta profile">
                    <div class="endpoint-header" onclick="toggleEndpoint(this)">
                        <div class="endpoint-info">
                            <span class="method put">PUT</span>
                            <span class="path">/usta/profile</span>
                            <span class="title">Update Usta Profile</span>
                        </div>
                        <span class="toggle-icon">‚ñº</span>
                    </div>
                    <div class="endpoint-content">
                        <div class="section">
                            <h4>Request</h4>
                            <pre><code class="language-http">PUT /usta/profile
Authorization: Bearer &lt;token&gt;
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Builder",
  "bio": "Updated professional description",
  "phone": "+355691234567"
}</code></pre>
                        </div>
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": true,
  "message": "Profile updated successfully",
  "data": {
    "id": "uuid",
    "firstName": "John",
    "lastName": "Builder",
    "email": "john@example.com",
    "phone": "+355691234567",
    "profilePicture": "https://...",
    "bio": "Updated professional description",
    "averageRating": 4.8,
    "totalRatings": 125,
    "totalHires": 98,
    "isVerified": true,
    "isFeatured": false,
    "profileStatus": "active",
    "notificationViaEmail": true,
    "notificationViaSms": false,
    "notificationViaApp": true
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Response Format -->
            <section class="category-section">
                <h2 class="category-title">üö´ Error Response Format</h2>
                
                <div class="endpoint">
                    <div class="endpoint-header">
                        <div class="endpoint-info">
                            <span class="method error">ERROR</span>
                            <span class="path">All Endpoints</span>
                            <span class="title">Error Response Format</span>
                        </div>
                    </div>
                    <div class="endpoint-content" style="display: block;">
                        <div class="section">
                            <h4>Response</h4>
                            <pre><code class="language-json">{
  "success": false,
  "message": "Error description",
  "errors": ["Detailed error message 1", "Detailed error message 2"],
  "statusCode": 400
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notes -->
            <section class="category-section">
                <h2 class="category-title">üìù Important Notes</h2>
                
                <div class="notes-section">
                    <div class="note-item">
                        <strong>üîê Authentication:</strong> All endpoints require <code>Authorization: Bearer &lt;token&gt;</code> header
                    </div>
                    <div class="note-item">
                        <strong>üìÑ Pagination:</strong> Jobs endpoints support <code>page</code> and <code>limit</code> query parameters
                    </div>
                    <div class="note-item">
                        <strong>üì± Phone Numbers:</strong> Included in all profile responses (customer/usta)
                    </div>
                    <div class="note-item">
                        <strong>üìÖ Created At:</strong> Included in job responses as requested
                    </div>
                    <div class="note-item">
                        <strong>üóëÔ∏è Soft Delete:</strong> Account deletion preserves data and can be reversed
                    </div>
                    <div class="note-item">
                        <strong>üë• Role-based:</strong> Responses differ based on user role (customer vs usta)
                    </div>
                    <div class="note-item">
                        <strong>‚ö° Real-time:</strong> Some endpoints include live calculated fields (progress, daysRemaining)
                    </div>
                </div>

                <div class="api-base-urls">
                    <h3>üîó API Base URL Pattern</h3>
                    <ul>
                        <li><code>/users/*</code> - User Management</li>
                        <li><code>/customer/*</code> - Customer Operations</li>
                        <li><code>/usta/*</code> - Usta Operations</li>
                        <li><code>/jobs/*</code> - Job Management</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Search and filter functionality
        const searchInput = document.getElementById('searchInput');
        const clearSearch = document.getElementById('clearSearch');
        const categoryFilter = document.getElementById('categoryFilter');
        const methodFilter = document.getElementById('methodFilter');
        const endpointsContainer = document.getElementById('endpointsContainer');
        const tableOfContents = document.getElementById('tableOfContents');

        // Generate table of contents
        function generateTOC() {
            const sections = document.querySelectorAll('.category-section h2');
            tableOfContents.innerHTML = '';
            
            sections.forEach(section => {
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = section.textContent;
                link.onclick = (e) => {
                    e.preventDefault();
                    section.scrollIntoView({ behavior: 'smooth' });
                };
                tableOfContents.appendChild(link);
            });
        }

        // Toggle endpoint content
        function toggleEndpoint(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.toggle-icon');
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                icon.textContent = '‚ñº';
            } else {
                content.style.display = 'block';
                icon.textContent = '‚ñ≤';
            }
        }

        // Filter endpoints
        function filterEndpoints() {
            const searchTerm = searchInput.value.toLowerCase();
            const categoryValue = categoryFilter.value;
            const methodValue = methodFilter.value;

            const sections = document.querySelectorAll('.category-section');
            
            sections.forEach(section => {
                const categoryMatch = !categoryValue || section.dataset.category === categoryValue;
                let sectionHasVisibleEndpoint = false;

                const endpoints = section.querySelectorAll('.endpoint');
                endpoints.forEach(endpoint => {
                    const methodMatch = !methodValue || endpoint.dataset.method === methodValue;
                    const searchMatch = !searchTerm || 
                        endpoint.dataset.search.includes(searchTerm) ||
                        endpoint.querySelector('.path').textContent.toLowerCase().includes(searchTerm) ||
                        endpoint.querySelector('.title').textContent.toLowerCase().includes(searchTerm);

                    const shouldShow = categoryMatch && methodMatch && searchMatch;
                    endpoint.style.display = shouldShow ? 'block' : 'none';
                    
                    if (shouldShow) {
                        sectionHasVisibleEndpoint = true;
                    }
                });

                // Hide section if no endpoints are visible
                section.style.display = categoryMatch && sectionHasVisibleEndpoint ? 'block' : 'none';
            });
        }

        // Clear search
        function clearSearchInput() {
            searchInput.value = '';
            filterEndpoints();
        }

        // Event listeners
        searchInput.addEventListener('input', filterEndpoints);
        clearSearch.addEventListener('click', clearSearchInput);
        categoryFilter.addEventListener('change', filterEndpoints);
        methodFilter.addEventListener('change', filterEndpoints);

        // Initialize
        generateTOC();
        
        // Make toggle function available globally
        window.toggleEndpoint = toggleEndpoint;

        // Smooth scrolling for anchor links
        document.addEventListener('DOMContentLoaded', function() {
            // Highlight syntax
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>